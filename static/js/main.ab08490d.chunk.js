(this["webpackJsonptermin-management-arika"]=this["webpackJsonptermin-management-arika"]||[]).push([[0],{75:function(e,n,t){},76:function(e,n,t){},83:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=t(25),c=t.n(a),o=(t(75),t(76),t(11)),s=t(128),l=t(126),u=t(129),d=t(124),h=t(130),j=t(127),m=t(121),b=t(2),f={position:"absolute",display:"grid",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:400,bgcolor:"background.paper",p:{xs:1,sm:2}};function g(e){return e.bookingConfirmed?Object(b.jsxs)(s.a,{sx:f,children:[Object(b.jsxs)(l.a,{align:"center",children:["Vielen Dank ",e.nick,"!"]}),Object(b.jsxs)(l.a,{align:"center",children:["Du bist jetzt f\xfcr den ",e.date," gebucht."]}),Object(b.jsx)(j.a,{sx:{marginTop:2},variant:"contained",onClick:e.handleClose,children:"Verstanden"})]}):Object(b.jsxs)(s.a,{sx:f,children:[Object(b.jsxs)(l.a,{align:"center",children:["Upps, das tut uns leid ",e.nick,"!"]}),Object(b.jsx)(l.a,{align:"center",children:"Leider ist der Termin mitlerweile nicht mehr verf\xfcgbar."}),Object(b.jsx)(j.a,{sx:{marginTop:2},variant:"contained",onClick:e.handleClose,children:"Zu den Terminen"})]})}var O=t(120),p=t(123),x={position:"absolute",display:"grid",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:{xs:"80%",sm:"0"},maxWidth:400,bgcolor:"background.paper",p:{xs:1,sm:2}};function v(e){var n=Object(r.useState)(""),t=Object(o.a)(n,2),i=t[0],a=t[1],c=Object(r.useState)(null),u=Object(o.a)(c,2),d=u[0],h=u[1],m=Boolean(d),f=m?"simple-popover":void 0;return Object(b.jsxs)(s.a,{sx:x,children:[Object(b.jsx)(l.a,{align:"center",children:"Ausgew\xe4hltes Datum: "}),Object(b.jsx)(l.a,{align:"center",sx:{marginBottom:2,fontWeight:"500"},children:e.date}),Object(b.jsx)(l.a,{align:"center",sx:{marginBottom:2},children:"Bitte gib einen (fiktiven) Namen zur Buchung an, um dich damit identifizieren zu k\xf6nnen"}),Object(b.jsx)(O.a,{value:i,onChange:function(e){return a(e.target.value)}}),Object(b.jsx)(j.a,{disabled:e.processingRequest,onClick:function(n){i.length>2?e.confirmBooking(i):h(n.currentTarget)},variant:"contained",sx:{marginTop:2},children:"Buchung abschlie\xdfen"}),Object(b.jsx)(p.a,{id:f,open:m,anchorEl:d,onClose:function(e){h(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(b.jsx)(l.a,{align:"center",sx:{p:2},children:"Der Name muss mindestens 3 Zeichen lang sein"})}),Object(b.jsx)(j.a,{onClick:e.handleClose,variant:"contained",color:"error",sx:{marginTop:2},children:"Zur\xfcck"})]})}var k="https://termin-management-default-rtdb.europe-west1.firebasedatabase.app/",S=function(){var e=new Headers;return e.append("Accept","application/json"),fetch(k+"moeglicheTermine.json",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()}))},T=function(){var e=new Headers;return e.append("Accept","application/json"),fetch(k+"geschlosseneTermine.json",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()}))},C=function(e){var n={method:"POST",body:JSON.stringify({timeId:e}),redirect:"follow"};return fetch(k+"geschlosseneTermine.json",n).then((function(e){return e.json()}))},w=function(e,n){var t={method:"POST",body:JSON.stringify({timeId:e,nutzer:n}),redirect:"follow"};return fetch(k+"nutzer.json",t).then((function(e){return e.json()}))},B=function(e){return fetch(k+"geschlosseneTermine.json").then((function(e){return console.log(e),null!==e&&e.json()})).then((function(n){for(var t in console.log(n),n)if(e===n[t].timeId)throw Error("Termin nicht verf\xfcgbar");return!1}))};function y(e){var n=Object(r.useState)(!1),t=Object(o.a)(n,2),i=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(o.a)(c,2),l=s[0],u=s[1],d=Object(r.useState)(!1),h=Object(o.a)(d,2),j=h[0],m=h[1],f=Object(r.useState)(""),O=Object(o.a)(f,2),p=O[0],x=O[1];return i?Object(b.jsx)(g,{handleClose:e.handleClose,nick:p,date:e.date,bookingConfirmed:l}):Object(b.jsx)(v,{date:e.date,confirmBooking:function(n){var t,r;m(!0),(t=e.termin_id,r=n,B(t).then((function(e){e||C(t)})).then((function(){return w(t,r)}))).then((function(e){a(!0),x(n),u(!0),m(!1)})).catch((function(e){u(!1),a(!0),m(!1)}))},handleClose:e.handleClose,processingRequest:j})}var z=["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"];function D(e){var n=Object(r.useState)(!1),t=Object(o.a)(n,2),i=t[0],a=t[1],c=function(){e.resetOffeneTermine(),a(!1)},l=function(e){return e.getDate().toString().padStart(2,"0")+". "+z[e.getMonth()]+" "+e.getFullYear()+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+" Uhr"};return Object(b.jsxs)(s.a,{elevation:4,sx:{marginBottom:2,padding:1},children:[Object(b.jsxs)(d.a,{children:[Object(b.jsx)(h.a,{sx:{marginRight:1},children:l(e.termin)}),Object(b.jsx)(j.a,{onClick:function(){a(!0)},variant:"contained",size:"small",children:"Buchen"})]},Date.parse(e.termin)),Object(b.jsx)(m.a,{open:i,onClose:c,children:Object(b.jsx)(y,{handleClose:c,date:l(e.termin),termin_id:e.termin_id})})]})}function J(){var e=Object(r.useState)({}),n=Object(o.a)(e,2),t=n[0],i=n[1];Object(r.useEffect)((function(){a()}),[]);var a=function(){S().then((function(e){return T().then((function(n){var t={};for(var r in e){var i=!1;for(var a in n)r===n[a].timeId&&(i=!0);i||(t[r]=JSON.parse(JSON.stringify(e[r].datum)))}return t}))})).then((function(e){i(e)}))};return Object(b.jsxs)(s.a,{elevation:0,children:[Object(b.jsx)(l.a,{variant:"h3",children:"Terminbuchung f\xfcr Hololens Testcase"}),Object(b.jsx)(l.a,{sx:{margin:2},children:"Vielen Dank f\xfcr das Interesse an unserer Evaluation mit der Hololens. Bitte bucht unten einen Termin, an dem ihr Zeit habt, um an der Evaluation teilzunehmen."}),Object(b.jsx)(s.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",margin:2},children:Object(b.jsx)(u.a,{sx:{display:"block"},children:function(){var e=[];for(var n in t)e.push(Object(b.jsx)(D,{termin:new Date(t[n]),termin_id:n,resetOffeneTermine:a},n));return e}()})})]})}var E=function(){return Object(b.jsx)("div",{className:"App",style:{margin:"1rem"},children:Object(b.jsx)(J,{})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,132)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root")),I()}},[[83,1,2]]]);
//# sourceMappingURL=main.ab08490d.chunk.js.map